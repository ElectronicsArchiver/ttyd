.include "macros.inc"


.section .text, "ax"  # 0x800055E0 - 0x802C0EE0

.global TEXGetGXTexObjFromPalette
TEXGetGXTexObjFromPalette:
/* 800373E4 000343E4  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 800373E8 000343E8  7C 08 02 A6 */	mflr r0
/* 800373EC 000343EC  90 01 00 34 */	stw r0, 0x34(r1)
/* 800373F0 000343F0  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 800373F4 000343F4  54 BF 18 38 */	slwi r31, r5, 3
/* 800373F8 000343F8  93 C1 00 28 */	stw r30, 0x28(r1)
/* 800373FC 000343FC  93 A1 00 24 */	stw r29, 0x24(r1)
/* 80037400 00034400  7C 9D 23 78 */	mr r29, r4
/* 80037404 00034404  83 C3 00 08 */	lwz r30, 8(r3)
/* 80037408 00034408  7D 3E F8 2E */	lwzx r9, r30, r31
/* 8003740C 0003440C  88 69 00 21 */	lbz r3, 0x21(r9)
/* 80037410 00034410  88 09 00 22 */	lbz r0, 0x22(r9)
/* 80037414 00034414  7C 03 00 40 */	cmplw r3, r0
/* 80037418 00034418  40 82 00 0C */	bne lbl_80037424
/* 8003741C 0003441C  39 40 00 00 */	li r10, 0
/* 80037420 00034420  48 00 00 08 */	b lbl_80037428
lbl_80037424:
/* 80037424 00034424  39 40 00 01 */	li r10, 1
lbl_80037428:
/* 80037428 00034428  80 89 00 08 */	lwz r4, 8(r9)
/* 8003742C 0003442C  7F A3 EB 78 */	mr r3, r29
/* 80037430 00034430  A0 A9 00 02 */	lhz r5, 2(r9)
/* 80037434 00034434  A0 C9 00 00 */	lhz r6, 0(r9)
/* 80037438 00034438  80 E9 00 04 */	lwz r7, 4(r9)
/* 8003743C 0003443C  81 09 00 0C */	lwz r8, 0xc(r9)
/* 80037440 00034440  81 29 00 10 */	lwz r9, 0x10(r9)
/* 80037444 00034444  48 27 A0 69 */	bl GXInitTexObj
/* 80037448 00034448  7C FE F8 2E */	lwzx r7, r30, r31
/* 8003744C 0003444C  3C A0 43 30 */	lis r5, 0x4330
/* 80037450 00034450  3C 60 80 2C */	lis r3, lbl_802C1EC0@ha
/* 80037454 00034454  90 A1 00 08 */	stw r5, 8(r1)
/* 80037458 00034458  88 C7 00 21 */	lbz r6, 0x21(r7)
/* 8003745C 0003445C  38 83 1E C0 */	addi r4, r3, lbl_802C1EC0@l
/* 80037460 00034460  88 07 00 22 */	lbz r0, 0x22(r7)
/* 80037464 00034464  7F A3 EB 78 */	mr r3, r29
/* 80037468 00034468  90 C1 00 0C */	stw r6, 0xc(r1)
/* 8003746C 0003446C  38 C0 00 00 */	li r6, 0
/* 80037470 00034470  C8 44 00 00 */	lfd f2, 0(r4)
/* 80037474 00034474  39 00 00 00 */	li r8, 0
/* 80037478 00034478  C8 01 00 08 */	lfd f0, 8(r1)
/* 8003747C 0003447C  90 01 00 14 */	stw r0, 0x14(r1)
/* 80037480 00034480  EC 20 10 28 */	fsubs f1, f0, f2
/* 80037484 00034484  80 87 00 14 */	lwz r4, 0x14(r7)
/* 80037488 00034488  90 A1 00 10 */	stw r5, 0x10(r1)
/* 8003748C 0003448C  80 A7 00 18 */	lwz r5, 0x18(r7)
/* 80037490 00034490  C8 01 00 10 */	lfd f0, 0x10(r1)
/* 80037494 00034494  C0 67 00 1C */	lfs f3, 0x1c(r7)
/* 80037498 00034498  EC 40 10 28 */	fsubs f2, f0, f2
/* 8003749C 0003449C  88 E7 00 20 */	lbz r7, 0x20(r7)
/* 800374A0 000344A0  48 27 A2 A1 */	bl GXInitTexObjLOD
/* 800374A4 000344A4  80 01 00 34 */	lwz r0, 0x34(r1)
/* 800374A8 000344A8  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 800374AC 000344AC  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 800374B0 000344B0  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 800374B4 000344B4  7C 08 03 A6 */	mtlr r0
/* 800374B8 000344B8  38 21 00 30 */	addi r1, r1, 0x30
/* 800374BC 000344BC  4E 80 00 20 */	blr 

.global TEXGet
TEXGet:
/* 800374C0 000344C0  80 63 00 08 */	lwz r3, 8(r3)
/* 800374C4 000344C4  54 80 18 38 */	slwi r0, r4, 3
/* 800374C8 000344C8  7C 63 02 14 */	add r3, r3, r0
/* 800374CC 000344CC  4E 80 00 20 */	blr 

.global UnpackTexPalette
UnpackTexPalette:
/* 800374D0 000344D0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800374D4 000344D4  7C 08 02 A6 */	mflr r0
/* 800374D8 000344D8  90 01 00 14 */	stw r0, 0x14(r1)
/* 800374DC 000344DC  93 E1 00 0C */	stw r31, 0xc(r1)
/* 800374E0 000344E0  7C 7F 1B 78 */	mr r31, r3
/* 800374E4 000344E4  80 63 00 00 */	lwz r3, 0(r3)
/* 800374E8 000344E8  3C 03 FF E0 */	addis r0, r3, 0xffe0
/* 800374EC 000344EC  28 00 AF 30 */	cmplwi r0, 0xaf30
/* 800374F0 000344F0  41 82 00 20 */	beq lbl_80037510
/* 800374F4 000344F4  3C 60 80 2C */	lis r3, lbl_802C1EC8@ha
/* 800374F8 000344F8  3C A0 80 2C */	lis r5, lbl_802C1ED8@ha
/* 800374FC 000344FC  38 63 1E C8 */	addi r3, r3, lbl_802C1EC8@l
/* 80037500 00034500  38 80 00 24 */	li r4, 0x24
/* 80037504 00034504  38 A5 1E D8 */	addi r5, r5, lbl_802C1ED8@l
/* 80037508 00034508  4C C6 31 82 */	crclr 6
/* 8003750C 0003450C  48 25 A5 85 */	bl OSPanic
lbl_80037510:
/* 80037510 00034510  80 7F 00 08 */	lwz r3, 8(r31)
/* 80037514 00034514  3C 00 80 00 */	lis r0, 0x8000
/* 80037518 00034518  7C 03 00 40 */	cmplw r3, r0
/* 8003751C 0003451C  41 81 00 C0 */	bgt lbl_800375DC
/* 80037520 00034520  7C 03 FA 14 */	add r0, r3, r31
/* 80037524 00034524  38 60 00 00 */	li r3, 0
/* 80037528 00034528  90 1F 00 08 */	stw r0, 8(r31)
/* 8003752C 0003452C  48 00 00 A0 */	b lbl_800375CC
lbl_80037530:
/* 80037530 00034530  80 9F 00 08 */	lwz r4, 8(r31)
/* 80037534 00034534  54 65 1B 78 */	rlwinm r5, r3, 3, 0xd, 0x1c
/* 80037538 00034538  7C 04 28 2E */	lwzx r0, r4, r5
/* 8003753C 0003453C  28 00 00 00 */	cmplwi r0, 0
/* 80037540 00034540  41 82 00 3C */	beq lbl_8003757C
/* 80037544 00034544  7C 1F 02 14 */	add r0, r31, r0
/* 80037548 00034548  7C 04 29 2E */	stwx r0, r4, r5
/* 8003754C 0003454C  80 9F 00 08 */	lwz r4, 8(r31)
/* 80037550 00034550  7C C4 28 2E */	lwzx r6, r4, r5
/* 80037554 00034554  88 06 00 23 */	lbz r0, 0x23(r6)
/* 80037558 00034558  28 00 00 00 */	cmplwi r0, 0
/* 8003755C 0003455C  40 82 00 20 */	bne lbl_8003757C
/* 80037560 00034560  80 86 00 08 */	lwz r4, 8(r6)
/* 80037564 00034564  38 00 00 01 */	li r0, 1
/* 80037568 00034568  7C 9F 22 14 */	add r4, r31, r4
/* 8003756C 0003456C  90 86 00 08 */	stw r4, 8(r6)
/* 80037570 00034570  80 9F 00 08 */	lwz r4, 8(r31)
/* 80037574 00034574  7C 84 28 2E */	lwzx r4, r4, r5
/* 80037578 00034578  98 04 00 23 */	stb r0, 0x23(r4)
lbl_8003757C:
/* 8003757C 0003457C  80 9F 00 08 */	lwz r4, 8(r31)
/* 80037580 00034580  38 A5 00 04 */	addi r5, r5, 4
/* 80037584 00034584  7C 04 28 2E */	lwzx r0, r4, r5
/* 80037588 00034588  28 00 00 00 */	cmplwi r0, 0
/* 8003758C 0003458C  41 82 00 3C */	beq lbl_800375C8
/* 80037590 00034590  7C 1F 02 14 */	add r0, r31, r0
/* 80037594 00034594  7C 04 29 2E */	stwx r0, r4, r5
/* 80037598 00034598  80 9F 00 08 */	lwz r4, 8(r31)
/* 8003759C 0003459C  7C C4 28 2E */	lwzx r6, r4, r5
/* 800375A0 000345A0  88 06 00 02 */	lbz r0, 2(r6)
/* 800375A4 000345A4  28 00 00 00 */	cmplwi r0, 0
/* 800375A8 000345A8  40 82 00 20 */	bne lbl_800375C8
/* 800375AC 000345AC  80 86 00 08 */	lwz r4, 8(r6)
/* 800375B0 000345B0  38 00 00 01 */	li r0, 1
/* 800375B4 000345B4  7C 9F 22 14 */	add r4, r31, r4
/* 800375B8 000345B8  90 86 00 08 */	stw r4, 8(r6)
/* 800375BC 000345BC  80 9F 00 08 */	lwz r4, 8(r31)
/* 800375C0 000345C0  7C 84 28 2E */	lwzx r4, r4, r5
/* 800375C4 000345C4  98 04 00 02 */	stb r0, 2(r4)
lbl_800375C8:
/* 800375C8 000345C8  38 63 00 01 */	addi r3, r3, 1
lbl_800375CC:
/* 800375CC 000345CC  80 1F 00 04 */	lwz r0, 4(r31)
/* 800375D0 000345D0  54 64 04 3E */	clrlwi r4, r3, 0x10
/* 800375D4 000345D4  7C 04 00 40 */	cmplw r4, r0
/* 800375D8 000345D8  41 80 FF 58 */	blt lbl_80037530
lbl_800375DC:
/* 800375DC 000345DC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800375E0 000345E0  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 800375E4 000345E4  7C 08 03 A6 */	mtlr r0
/* 800375E8 000345E8  38 21 00 10 */	addi r1, r1, 0x10
/* 800375EC 000345EC  4E 80 00 20 */	blr 
